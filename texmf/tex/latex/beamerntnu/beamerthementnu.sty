%
% Malfil for NTNU-presentasjon i latex-beamer
%
% Basert på Håvard Berland's mal fra 2005:
%
%     http://www.math.ntnu.no/~berland/ntnubeamer/
%
% Håvard Berland 2005, <Havard.Berland@math.ntnu.no>
%
% Karl Yngve Lervåg, 2013
%
\mode<presentation>
\RequirePackage{helvet}
\setbeamertemplate{navigation symbols}{}

% Colors
\definecolor{ntnublue}{rgb}{0.0547,0.172,0.555}
\definecolor{pagenumbercolor}{rgb}{0.742,0.844,0.8945}
\setbeamercolor{normal text}{fg=black,bg=white}
\setbeamercolor{pagenumber}{fg=pagenumbercolor}
\setbeamercolor{alerted text}{fg=red}
\setbeamercolor{example text}{fg=ntnublue!50!black}
\setbeamercolor{structure}{fg=ntnublue}
\setbeamercolor{background canvas}{parent=normal text}
\setbeamercolor{background}{parent=background canvas}
\setbeamercolor{footline}{fg=white}%,bg=red}

% Lists
\setbeamercolor*{itemize item}{fg=black}
\setbeamercolor*{itemize subitem}{fg=black}
\setbeamercolor*{itemize subsubitem}{fg=black}
\setbeamercolor*{enumerate item}{fg=black}
\setbeamercolor*{enumerate subitem}{fg=black}
\setbeamercolor*{enumerate subsubitem}{fg=black}
\setbeamercolor*{title}{fg=black}
\setbeamercolor*{frametitle}{fg=black}
\defbeamertemplate*{itemize item}{ntnu}{---}
\defbeamertemplate*{itemize subitem}{ntnu}{$\bullet$}
\defbeamertemplate*{itemize subsubitem}{ntnu}{---}

% Fonts
\setbeamerfont{title}{size=\large,series=\bfseries}
\setbeamerfont{subtitle}{size=\normalsize}
\setbeamerfont{author}{size=\normalsize}
\setbeamerfont{date}{size=\normalsize}
\setbeamerfont{institute}{size=\normalsize}
\setbeamerfont{frametitle}{size=\LARGE,series=\bfseries}
\setbeamerfont{footline}{size=\tiny}
\setbeamerfont{pagenumber}{size=\footnotesize,series=\bfseries}

% Size
\setbeamersize{text margin left=1cm,text margin right=1em}

%
% Declare image for optimization
% * Language specific images/logos are declared in the other files
\pgfdeclareimage[width=1.001\paperwidth]{bakgrunn}{gfx/bakgrunn}

% Define templates for the background canvas
\defbeamertemplate*{background canvas}{ntnu theme titlepage}{%
  \pgfuseimage{bakgrunnforside}}
\defbeamertemplate*{background canvas}{ntnu theme}{%
  \pgfuseimage{bakgrunn}}

%
% Titlepage
%
\newcommand{\ntnutitlepage}{{%
    \setbeamertemplate{background canvas}[ntnu theme titlepage]%
    \setbeamertemplate{footline}[ntnu theme titlepage]%
    \begin{frame}[noframenumbering]%
      \titlepage%
    \end{frame}%
  }}
\defbeamertemplate*{title page}{ntnu}[1][]{%
  \vspace{0.31\paperheight}
  \begin{beamercolorbox}[sep=3pt,left,leftskip=1.2cm,#1]{institute}
    \usebeamerfont{institute}\insertinstitute
  \end{beamercolorbox}
  \vspace{0.08\paperheight}
  \begin{beamercolorbox}[sep=3pt,left,leftskip=1.2cm,#1]{title}
    \usebeamerfont{title}\inserttitle\par%
    \ifx\insertsubtitle\@empty%
    \else%
      \vskip0.25em%
      { \usebeamerfont{subtitle}%
        \usebeamercolor[fg]{subtitle}%
        \insertsubtitle\par
      }%
    \fi%
  \end{beamercolorbox}
  \begin{beamercolorbox}[sep=3pt,left,leftskip=1.2cm,#1]{author}
    \usebeamerfont{author}\insertauthor
  \end{beamercolorbox}
  \begin{beamercolorbox}[sep=3pt,left,leftskip=1.2cm,#1]{date}
    \usebeamerfont{date}\insertdate
  \end{beamercolorbox}
  \vfill
}

%
% Footer
%
\defbeamertemplate*{footline}{ntnu theme}{\hbox{%
    \begin{beamercolorbox}[wd=0.3\textwidth,ht=5mm,dp=2mm,left]{footline}%
      \hspace{0.02\textwidth}%
      \usebeamerfont{footline}www.ntnu.no%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=0.68\textwidth,ht=5mm,dp=2mm,right]{ffootline}%
      \usebeamerfont{footline}%
      \insertframenumber~/~\inserttotalframenumber\hspace{2em}
      \insertshortauthor,~\insertshorttitle%
    \end{beamercolorbox}%
  }}
\defbeamertemplate{footline}{ntnu theme titlepage}{\hbox{%
    \begin{beamercolorbox}[wd=0.3\textwidth,ht=5mm,dp=2mm,left]{footline}%
      \hspace{0.02\textwidth}%
      \usebeamerfont{footline}www.ntnu.no%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=0.68\textwidth,ht=5mm,dp=2mm,right]{ffootline}%
      \usebeamerfont{footline}%
      \insertshortauthor,~\insertshorttitle%
    \end{beamercolorbox}%
  }}

%
% Page headers
%
\defbeamertemplate*{frametitle}{ntnu theme}[1][left]{
  \@tempdima=\textwidth%
  \advance\@tempdima by\beamer@rightmargin%
  \vskip1em
  \begin{beamercolorbox}[sep=0cm,#1,wd=\the\@tempdima]{frametitle}
    \if@tempswa\else\csname beamer@fte#1\endcsname\fi%
    {\usebeamerfont{frametitle}\insertframetitle\par}%
  \end{beamercolorbox}%
}

\mode<all>
