%
% Malfil for NTNU-presentasjon i latex-beamer
%
% Basert på Powerpointmal laget vår 2005 av NTNU-infoavdelingen.
%
%     http://www.math.ntnu.no/~berland/ntnubeamer/
% 
% Ikke bruk dette temaet (theme) direkte fra latex-filene, inkluder
% filene med språk i navnet slik at riktige bakgrunner blir valgt, og
% de filene vil inkludere denne for deg.
%
% Håvard Berland 2005, <Havard.Berland@math.ntnu.no>
% Åsmund Ervik 2013, Fixed sillyness so that it looks non-intrusive.
%


\mode<presentation>

\RequirePackage{helvet}

\setbeamertemplate{navigation symbols}{}

\definecolor{ntnublue}{rgb}{0.0547,0.172,0.555}
\definecolor{pagenumbercolor}{rgb}{0.742,0.844,0.8945}
\setbeamercolor{normal text}{fg=black,bg=white}
\setbeamercolor{pagenumber}{fg=pagenumbercolor}
\setbeamercolor{alerted text}{fg=red}
\setbeamercolor{example text}{fg=ntnublue!50!black}
\setbeamercolor{structure}{fg=ntnublue}
\setbeamercolor{background canvas}{parent=normal text}
\setbeamercolor{background}{parent=background canvas}
\setbeamercolor{footline}{fg=white}%,bg=red}

\setbeamerfont{footline}{size=\tiny}

%\tiny	5	5	
%\scriptsize	7	7	
%\footnotesize	8	8	
%\small	9	9	
%\normalsize	10	10	
%\large	12	12	
%\Large	14	14.40	
%\LARGE	18	17.28	
%\huge	20	20.74	
%\Huge	24	24.88




\setbeamersize{text margin left=1cm,text margin right=1em}

% Bildene deklareres her først, da blir de kun fysisk inkludert en
% gang i hver pdf-fil som genereres, selv om de brukes på hver side.
% Andre språkavhengige bilder deklareres i de spesifikke språkfilene.
\pgfdeclareimage[height=\paperheight,interpolate=true]{bakgrunn}{gfx/bakgrunn}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definerer to templates for bakgrunn, avhengig av om det er forside
% eller ikke. Hvilken som brukes må styres av brukeren, se kommandoen 
% \ntnutitlepage under.
\defbeamertemplate*{background canvas}{ntnu theme}%
{%
  \pgfuseimage{bakgrunn}%
}
\defbeamertemplate{background canvas}{ntnu theme titlepage}%
{%
  \pgfuseimage{bakgrunnforside}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% En kommando for å lage forside, som bruker en annen bakgrunn
\newcommand{\ntnutitlepage}{%
{% open a TeX group to keep changes local
\setbeamertemplate{background canvas}[ntnu theme titlepage]
\setbeamertemplate{footline}[ntnu theme titlepage]
\begin{frame}[noframenumbering]%
\titlepage%
\end{frame}%
}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Alternativ versjon av footer som gjør at NTNU-logoen ikke tas med.
%
% For å aktivere denne, legg til kommandoen
%    \setbeamertemplate{footline}[ntnu theme nologo]
% et sted i tex-fila di.
%
\defbeamertemplate*{footline}{ntnu theme}
{
  \hbox{%
    \begin{beamercolorbox}[wd=0.3\textwidth,ht=5mm,dp=2mm,left]{footline}%
      \hspace{2mm}\usebeamerfont{footline}www.ntnu.no%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=0.3\textwidth,ht=5mm,dp=2mm,center]{footline}%
      \usebeamerfont{pagenumber}
      \insertframenumber
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=0.39\textwidth,ht=5mm,dp=2mm,right]{ffootline}%
      \usebeamerfont{footline}\insertshortauthor,~\insertshorttitle~\hspace{2mm}%
    \end{beamercolorbox}%
  }
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Tegner opp footer for forsida, \ntnutitlepage styrer bruk av denne.
\defbeamertemplate{footline}{ntnu theme titlepage}
{
  \hbox{%
    \begin{beamercolorbox}[wd=0.2\textwidth,ht=5mm,dp=2mm,left]{footline}%
      \hspace{2mm}\usebeamerfont{footline}www.ntnu.no%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=0.79\textwidth,ht=5mm,dp=2mm,right]{ffootline}%
      \usebeamerfont{footline}\insertshortauthor,~\insertshorttitle~\hspace{2mm}%
    \end{beamercolorbox}%
  }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Progress bar
\RequirePackage{tikz}
\usetikzlibrary{calc}

\definecolor{pbgray}{HTML}{575757}% background color for the progress bar

\def\progressbar@progressbar{} % the progress bar
\newcount\progressbar@tmpcounta% auxiliary count
\newcount\progressbar@tmpcountb% auxiliary count
\newdimen\progressbar@pbht %progressbar height
\newdimen\progressbar@pbwd %progressbar width
\newdimen\progressbar@tmpdim % auxiliary dimension

\progressbar@pbwd=0.8\linewidth
\progressbar@pbht=1pt

% the progress bar
\def\progressbar@progressbar{%

    \progressbar@tmpcounta=\insertframenumber
    \progressbar@tmpcountb=\inserttotalframenumber
    \pgfmathaddtocount{\progressbar@tmpcounta}{-1}
    \pgfmathaddtocount{\progressbar@tmpcountb}{-1}
    \progressbar@tmpdim=\progressbar@pbwd
    \multiply\progressbar@tmpdim by \progressbar@tmpcounta
    \divide\progressbar@tmpdim by \progressbar@tmpcountb

  \begin{tikzpicture}[very thin]
    \draw[pbgray!30,line width=\progressbar@pbht]
      (0pt, 0pt) -- ++ (\progressbar@pbwd,0pt);
    \draw[draw=none]  (\progressbar@pbwd,0pt) -- ++ (2pt,0pt);

    \draw[fill=pbgray!30,draw=pbgray] %
       ( $ (\progressbar@tmpdim, \progressbar@pbht) + (0,1.5pt) $ ) -- ++(60:3pt) -- ++(180:3pt) ;

    %\node[draw=pbgray!30,text width=3.5em,align=center,inner sep=1pt,
    %text=pbgray!70,anchor=east] at (0,0) {\footnotesize\sectionname};
  \end{tikzpicture}%
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Setter opp teksten på forsida (tittel på foredrag, foredragsholder etc..
\defbeamertemplate*{title page}{ntnu}[1][]
{%
  \vspace{0.29\paperheight}
  \begin{beamercolorbox}[sep=3pt,left,leftskip=1.2cm,#1]{institute}
    \usebeamerfont{institute}\insertinstitute
  \end{beamercolorbox}
  \vspace{0.05\paperheight}
%  \begin{flushleft}
    \begin{beamercolorbox}[sep=3pt,left,leftskip=1.2cm,#1]{title}
      \usebeamerfont{title}\inserttitle\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.25em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
      \fi%     
    \end{beamercolorbox}%
    \vskip1em\par
    \begin{beamercolorbox}[sep=3pt,left,leftskip=1.2cm,#1]{author}
      \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=3pt,left,leftskip=1.2cm,#1]{date}
      \usebeamerfont{date}\insertdate
    \end{beamercolorbox}
%  \end{flushleft}
  \vfill
  \
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Header på hver slide
\defbeamertemplate*{frametitle}{ntnu theme}[1][left]
{
  \@tempdima=\textwidth%
%$  \advance\@tempdima by\beamer@leftmargin%
  \advance\@tempdima by\beamer@rightmargin%
  % \@tempdima must now be the whole physical page width
  
  % sep-option to beamercolorbox gives padding in all directions
  % inside the beamercolorbox.
  
  % Progress bar:
  \vskip-30pt
  \begin{beamercolorbox}[wd=\paperwidth,ht=5ex,center,dp=1ex]{white}%
      \progressbar@progressbar%
  \end{beamercolorbox}%
  
  % Skip a bit downwards:
  \vskip0.0cm
  
  % Print frametitle:
  \begin{beamercolorbox}[sep=0cm,#1,wd=\the\@tempdima]{frametitle}
    \if@tempswa\else\csname beamer@fte#1\endcsname\fi%
    {\usebeamerfont{frametitle}\insertframetitle\par}%
    % \if@tempswa\else\vskip-.3cm\fi% set inside beamercolorbox... evil here... 
  \end{beamercolorbox}%
}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Noen generelle innstillinger
\setbeamercolor*{itemize item}{fg=black}
\setbeamercolor*{itemize subitem}{fg=black}
\setbeamercolor*{itemize subsubitem}{fg=black}
\setbeamercolor*{enumerate item}{fg=black}
\setbeamercolor*{enumerate subitem}{fg=black}
\setbeamercolor*{enumerate subsubitem}{fg=black}
\setbeamercolor*{title}{fg=black}
\setbeamercolor*{frametitle}{fg=black}


\defbeamertemplate*{itemize item}{ntnu}{---}
\defbeamertemplate*{itemize subitem}{ntnu}{$\bullet$}
\defbeamertemplate*{itemize subsubitem}{ntnu}{---}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Fonter

\setbeamerfont{title}{size=\large,series=\bfseries}
\setbeamerfont{subtitle}{size=\normalsize}
\setbeamerfont{author}{size=\normalsize}
\setbeamerfont{date}{size=\normalsize}
\setbeamerfont{institute}{size=\normalsize}
\setbeamerfont{frametitle}{size=\LARGE,series=\bfseries}
\setbeamerfont{pagenumber}{size=\footnotesize,series=\bfseries}


\mode
<all>
