name: alp
root: ~/sikt/alp
tmux_command: TERM=xterm-256color tmux

on_project_start:
  - xdotool windowsize --usehints $(xdotool getactivewindow) 165 100%
  - xdotool key --window $(xdotool getactivewindow) "super+c"

on_project_exit:
  - xdotool windowsize --usehints $(xdotool getactivewindow) 82 100%

windows:
  - dev:
      layout: even-horizontal
      panes:
        - editor:
          - nvim Readme.md
  - backend:
      layout: even-horizontal
      panes:
        - server:
          - ALP_SERVER_CONFIGFILE=.user/config.utv.properties java -jar ./packages/alp-server/target/alp-server-1.0-SNAPSHOT-jar-with-dependencies.jar
        - dbalp:
          - docker-compose -f infrastructure/localdev/postgres.yaml up
  - frontend:
      layout: even-horizontal
      panes:
        - server:
          - cd packages/frontend
          - yarn start
        - mock:
          - cd ~/sikt/alp/packages/frontend
          - ALP_USERID=nin:00000000003 yarn start-mock-oauth2-server
